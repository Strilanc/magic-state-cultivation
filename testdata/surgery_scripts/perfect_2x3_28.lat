# https://algassert.com/quirk#circuit={"cols":[["H","H","H","H","H","H","H","H","H","H","H","H","H","H"],[1,1,1,1,"Z^%C2%BC","Z^%C2%BC","Z^%C2%BC","Z^%C2%BC","Z^%C2%BC","Z^%C2%BC","Z^%C2%BC","Z^%C2%BC","Z^%C2%BC","Z^%C2%BC"],["zpar","zpar","zpar",1,"X"],[1,1,"%E2%8A%96","Z"],["zpar","zpar",1,1,1,"X"],["zpar",1,1,"zpar",1,1,"X"],[1,1,1,1,"Measure","Measure","Measure"],["X","X",1,"X","%E2%80%A2"],[1,"X","X",1,1,"%E2%80%A2"],[1,1,"X","X",1,1,"%E2%80%A2"],["zpar",1,"zpar",1,1,1,1,"X"],[1,1,1,1,1,1,1,"Measure"],["zpar",1,"zpar",1,"i",1,1,"%E2%80%A2"],["X^-%C2%BD"],[1,"zpar","zpar","zpar",1,1,1,1,"X"],["zpar",1,"zpar","zpar",1,1,1,1,1,"X"],["zpar","zpar",1,"zpar",1,1,1,1,1,1,"X"],["zpar","zpar","zpar",1,1,1,1,1,1,1,1,"X"],["zpar",1,1,1,1,1,1,1,1,1,1,1,"X"],[1,"zpar",1,1,1,1,1,1,1,1,1,1,1,"X"],[1,1,1,1,1,1,1,1,"Measure","Measure","Measure","Measure","Measure","Measure"],["X","X","X","X",1,1,1,1,"%E2%80%A2","X","X","X","X","X"],["zpar",1,"zpar","zpar",1,1,1,1,"i","%E2%80%A2"],["zpar","zpar",1,"zpar",1,1,1,1,"i",1,"%E2%80%A2"],["zpar","zpar","zpar",1,1,1,1,1,"i",1,1,"%E2%80%A2"],["Z^%C2%BD",1,1,1,1,1,1,1,1,1,1,1,"%E2%80%A2"],[1,"Z^%C2%BD",1,1,1,1,1,1,1,1,1,1,1,"%E2%80%A2"],["H","H"],["Measure","Measure"],["Chance","Chance"],["|0%E2%9F%A9%E2%9F%A80|","|0%E2%9F%A9%E2%9F%A80|"],[1,1,"Z^%C2%BC","Z^%C2%BC"],[1,1,"H","H"],[1,1,"Chance","Chance"]]}
# https://algassert.com/zigxag#1,-3,in;3,-3,in;6,-3,in;8,-3,in;10,-3,in;13,-3,in;16,-3,in;19,-3,in;0,-2,+;1,-2,O;2,-2,+;3,-2,O;4,-2,+;5,-2,+;6,-2,O;7,-2,+;8,-2,O;9,-2,+;10,-2,O;12,-2,+;13,-2,O;14,-2,+;15,-2,+;16,-2,O;17,-2,+;18,-2,+;19,-2,O;20,-2,+;-1,-1,@;0,-1,+;1,-1,+;2,-1,@;3,-1,+;4,-1,+;5,-1,@;6,-1,+;7,-1,@;8,-1,+;9,-1,@;10,-1,+;11,-1,w;12,-1,@;13,-1,+;14,-1,+;15,-1,@;16,-1,+;17,-1,+;18,-1,@;19,-1,+;20,-1,+;21,-1,in;-1,0,@;0,0,@;1,0,+;2,0,+;3,0,@;4,0,+;5,0,+;6,0,@;7,0,+;8,0,+;9,0,+;10,0,+;11,0,+;12,0,+;13,0,@;14,0,+;15,0,+;16,0,@;17,0,+;18,0,+;19,0,+;20,0,+;21,0,in;1,1,+;4,1,+;8,1,+;10,1,+;14,1,+;17,1,+;19,1,+;20,1,+;-1,2,@;0,2,+;1,2,@;2,2,+;3,2,+;4,2,@;5,2,+;6,2,O;7,2,+;8,2,+;9,2,+;10,2,@;11,2,+;12,2,+;13,2,+;14,2,+;15,2,+;16,2,+;17,2,@;18,2,+;19,2,@;20,2,+;21,2,+;22,2,+;23,2,+;24,2,+;25,2,out;6,3,+;7,3,+;8,3,@;9,3,+;10,3,+;11,3,+;12,3,+;13,3,+;14,3,@;15,3,+;16,3,+;17,3,+;18,3,+;19,3,+;20,3,@;21,3,+;22,3,+;23,3,+;24,3,+;25,3,out:1,-3,1,-2,-;3,-3,3,-2,-;6,-3,6,-2,-;8,-3,8,-2,-;10,-3,10,-2,-;13,-3,13,-2,-;16,-3,16,-2,-;19,-3,19,-2,-;0,-2,1,-2,-;0,-2,0,-1,-;1,-2,1,-1,-;2,-2,3,-2,-;2,-2,2,-1,-;3,-2,4,-2,-;3,-2,3,-1,-;4,-2,4,-1,-;5,-2,6,-2,-;5,-2,5,-1,-;6,-2,6,-1,-;7,-2,8,-2,-;7,-2,7,-1,-;8,-2,8,-1,-;9,-2,10,-2,-;9,-2,9,-1,-;10,-2,10,-1,-;12,-2,13,-2,-;12,-2,12,-1,-;13,-2,14,-2,-;13,-2,13,-1,-;14,-2,14,-1,-;15,-2,16,-2,-;15,-2,15,-1,-;16,-2,17,-2,-;16,-2,16,-1,-;17,-2,17,-1,-;18,-2,19,-2,-;18,-2,18,-1,-;19,-2,20,-2,-;19,-2,19,-1,-;20,-2,20,-1,-;-1,-1,0,-1,-;0,-1,1,-1,-;0,-1,0,0,-;1,-1,2,-1,-;1,-1,1,0,-;2,-1,3,-1,-;3,-1,4,-1,-;3,-1,3,0,-;4,-1,5,-1,-;4,-1,4,0,-;5,-1,6,-1,-;6,-1,7,-1,-;6,-1,6,0,-;7,-1,8,-1,-;8,-1,9,-1,-;8,-1,8,0,-;9,-1,10,-1,-;10,-1,11,-1,-;10,-1,10,0,-;11,-1,12,-1,-;12,-1,13,-1,-;13,-1,14,-1,-;13,-1,13,0,-;14,-1,15,-1,-;14,-1,14,0,-;15,-1,16,-1,-;16,-1,17,-1,-;16,-1,16,0,-;17,-1,18,-1,-;17,-1,17,0,-;18,-1,19,-1,-;19,-1,20,-1,-;19,-1,19,0,-;20,-1,21,-1,-;20,-1,20,0,-;-1,0,0,0,-;0,0,1,0,-;1,0,2,0,-;1,0,1,1,-;2,0,3,0,-;3,0,4,0,-;4,0,5,0,-;4,0,4,1,-;5,0,6,0,-;6,0,7,0,-;7,0,8,0,-;8,0,9,0,-;8,0,8,1,-;9,0,10,0,-;10,0,11,0,-;10,0,10,1,-;11,0,12,0,-;12,0,13,0,-;13,0,14,0,-;14,0,15,0,-;14,0,14,1,-;15,0,16,0,-;16,0,17,0,-;17,0,18,0,-;17,0,17,1,-;18,0,19,0,-;19,0,20,0,-;19,0,19,1,-;20,0,21,0,-;20,0,20,1,-;1,1,1,2,-;4,1,4,2,-;8,1,8,2,-;10,1,10,2,-;14,1,14,2,-;17,1,17,2,-;19,1,19,2,-;20,1,20,2,-;-1,2,0,2,-;0,2,1,2,-;1,2,2,2,-;2,2,3,2,-;3,2,4,2,-;4,2,5,2,-;5,2,6,2,-;6,2,7,2,-;6,2,6,3,-;7,2,8,2,-;8,2,9,2,-;8,2,8,3,-;9,2,10,2,-;10,2,11,2,-;11,2,12,2,-;12,2,13,2,-;13,2,14,2,-;14,2,15,2,-;14,2,14,3,-;15,2,16,2,-;16,2,17,2,-;17,2,18,2,-;18,2,19,2,-;19,2,20,2,-;20,2,21,2,-;20,2,20,3,-;21,2,22,2,-;22,2,23,2,-;23,2,24,2,-;24,2,25,2,-;6,3,7,3,-;7,3,8,3,-;8,3,9,3,-;9,3,10,3,-;10,3,11,3,-;11,3,12,3,-;12,3,13,3,-;13,3,14,3,-;14,3,15,3,-;15,3,16,3,-;16,3,17,3,-;17,3,18,3,-;18,3,19,3,-;19,3,20,3,-;20,3,21,3,-;21,3,22,3,-;22,3,23,3,-;23,3,24,3,-;24,3,25,3,-

let q0 = 0+0j
let q1 = 0+1j
let q2 = 2+0j
let q3 = 2+1j
let m0 = 1+0j
let m1 = 1+1j
  /
 T    .    .



 .    .    .

====================
  /
 X    .    .
/|
 |
 |/         /
 X    .    T
====================
  /         /
 Z----X----Z
/     |
  /   |
 Z----X----X
/         /
====================
  /    /    /
 Z    T    Z
/         /

  /
 Z    .    .
/
====================
  /    /    /
 Z    X    X
/    /|   /|
      |    |
  /   |/   |/
 Z    X    X
/
====================
measures m0__3a
measures m0__3b
let m0__3 = m0__3a ^ m0__3b
  /         /
 Z--*-Z    Z
/    /    /

  /         /
 Z    Z--*-Z
/    /    /
feedback X at q2 if m0__3
feedback X at q3 if m0__3
====================
  /         /
 Z    .    Z
/         /

  /    /    /
 Z    T    Z
/         /
====================
measures m0_2_
  /         /
 Z----X----Z
/     |   /
      *
  /   |/    /
 Z    Z    Z
/    /    /
====================
replace A with Y else Z if m0_2_
measures s0_2_
       /    /
 Z----Z    Z
/         /

  /         /
 Z    A    Z
/    /    /
feedback Z at m0 if s0_2_
feedback Z at q2 if s0_2_
====================
       /    /
 .    X    Z
     /|   /
      |
  /   |/    /
 Z    X    Z
/         /
====================
measures sx0
  /         /
 Z----X    Z
     /    /

  /         /
 Z    Y    Z
/    /    /
feedback X at q0 if sx0
feedback X at q0
====================
====================
  /    /    /
 Z    T    Z
/         /

  /    /    /
 Z----X    Z
/         /
====================
measures anon2
  /    /    /
 Z    X    Z
/    /|   /
      @
  /   |/    /
 Z    X    Z
/    /    /
feedback Z at q1 if anon2
feedback Z at q3 if anon2
====================
measures m_123a
measures m_123b
let m_123 = m_123a ^ m_123b
  /         /
 Z    X-*--Z
/    /    /

  /         /
 Z    X-*--Z
/    /    /
feedback X at q0 if m_123
feedback X at q1 if m_123
feedback X at q2 if m_123
feedback X at q3 if m_123
====================
====================
  /    /    /
 Z    T    Z
/         /

  /    /    /
 Z    T    Z
/         /
====================
measures t0
measures t1
  /         /
 Z-*--Z    Z
/    /    /

  /         /
 Z-*--Z    Z
/    /    /
====================
====================
  /    /    /
 Z    T    Z
/         /

  /    /    /
 Z    X----Z
/         /
====================
measures anon01_3
  /    /    /
 Z    X    Z
/    /|   /
      @
  /   |/    /
 Z    X    Z
/    /    /
feedback Z at q1 if anon01_3
feedback Z at q3 if anon01_3
====================
measures m01_3b
measures m01_3a
let m01_3 = m01_3a ^ m01_3b
  /    /    /
 Z--*-Z    Z
/    /    /

  /    /    /
 Z--*-Z    Z
/    /    /
====================
measures anon01_3b
  /    /    /
 Z    X    Z
/    /|   /
      @
  /   |/    /
 Z    X    Z
/    /    /
feedback Z at q1 if anon01_3b
feedback Z at q3 if anon01_3b
====================
measures s01_3b
replace A with Y else Z if m01_3
measures s01_3a
  /         /
 Z    A    Z
/    /    /


  /         /
 Z    X--*-Z
/    /    /
let f1 = s01_3a & m01_3
let f2 = f1 ^ s01_3b
feedback Z at q0 if f2
feedback Z at q1 if f2
feedback Z at q3 if f2
====================
====================
  /    /    /
 Z    X----Z
/         /

  /    /    /
 Z    T    Z
/         /
====================
measures anon012_
  /    /    /
 Z    X    Z
/    /|   /
      @
  /   |/    /
 Z    X    Z
/    /    /
feedback Z at q0 if anon012_
feedback Z at q2 if anon012_
====================
measures m012_b
measures m012_a
let m012_ = m012_a ^ m012_b
  /    /    /
 Z--*-Z    Z
/    /    /

  /    /    /
 Z--*-Z    Z
/    /    /
====================
replace B with Y else Z if t1
measures s1
measures anon012_b
  /    /    /
 Z    X    Z
/    /|   /
      @
      |/    /
 B    X    Z
/    /    /
feedback Z at q2 if anon012_b
====================
measures s012_b
replace A with Y else Z if m012_
measures s012_a
  /         /
 Z    X--*-Z
/    /    /

  /         /
 T    A    Z
     /    /
====================
====================
measures m0_23
  /         /
 Z----X----Z
/     |   /
      *
  /   |     /
 Z----X----Z
/         /
====================
replace A with Y else Z if t0
replace B with Y else Z if m0_23
measures s0
measures s0_23
            /
 A    .    Z
/         /

            /
 B    .    Z
/         /
feedback Z at q3 if s0_23
let f0 = s012_a & m012_
feedback Z at q2 if f0 ^ s012_b ^ s0_23
discard_shot_if t0 ^ s0 ^ anon012_b ^ s0_23 ^ f0 ^ s012_b
discard_shot_if t1 ^ s1 ^ f0 ^ s012_b
output_should_be TT
